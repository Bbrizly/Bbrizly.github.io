<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UPSTART</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet"
  />

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
  />

  <!-- Chart.js -->
  <script
    src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"
    defer
  ></script>

  <style>
    /****************************************************
     * LAYOUT & THEME VARIABLES
     ****************************************************/
    :root {
      --sidebar-width: 220px;
      --sidebar-bg: #1e1f21;
      --sidebar-hover-bg: #2b2c2e;
      --sidebar-text-color: #d0d0d0;
      --sidebar-brand-border: rgba(255, 255, 255, 0.1);

      --main-bg: #f8f9fa; /* Light grayish background */
      --card-bg: #ffffff;
      --card-border: #e0e0e0;
      --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

      --primary-font: "Roboto", sans-serif;
      --button-hover-bg: #3b434f;
      --button-hover-color: #fff;

      --up-color: #1abc9c; /* greenish for +% */
      --down-color: #e74c3c; /* red for -% */
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: var(--primary-font);
      background-color: var(--main-bg);
      color: #333;
      overflow: hidden;
    }
    a {
      text-decoration: none;
    }

    /****************************************************
     * SIDEBAR
     ****************************************************/
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: var(--sidebar-width);
      height: 100%;
      background-color: var(--sidebar-bg);
      color: var(--sidebar-text-color);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      padding-bottom: 1rem;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    .sidebar .brand {
      display: flex;
      align-items: center;
      padding: 1rem;
      border-bottom: 1px solid var(--sidebar-brand-border);
      margin-bottom: 1rem;
      font-size: 1.25rem;
      color: #fff;
    }
    .sidebar hr {
      border-color: var(--sidebar-brand-border);
      margin: 0 1rem 1rem 1rem;
    }
    .sidebar .nav-link {
      color: var(--sidebar-text-color);
      padding: 0.75rem 1.25rem;
      font-size: 0.95rem;
      display: block;
      position: relative;
    }
    .sidebar .nav-link i {
      margin-right: 8px;
    }
    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
      background-color: var(--sidebar-hover-bg);
      color: #fff;
    }
    /* HR Dept red dot */
    #hrDeptIndicator {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 8px;
      height: 8px;
      background: red;
      border-radius: 50%;
      display: none;
    }

    /****************************************************
     * TOP BAR/HEADER (Inside Main Content)
     ****************************************************/
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 0.75rem 1rem;
      background-color: #fff;
      border-bottom: 1px solid #ddd;
      height: 60px;
    }
    .top-bar .btn {
      margin-left: 0.5rem;
    }
    .top-bar .user-avatar {
      margin-left: 1rem;
    }

    /****************************************************
     * MAIN CONTENT
     ****************************************************/
    .main-content {
      margin-left: var(--sidebar-width);
      height: 100%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      background-color: var(--main-bg);
    }
    .section {
      height: 100%;
      overflow-y: auto;
      padding: 2rem;
      box-sizing: border-box;
    }
    .section-header {
      margin-bottom: 1rem;
      font-weight: 600;
    }

    /****************************************************
     * CARDS & UI ELEMENTS
     ****************************************************/
    .dash-card {
      background-color: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 6px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      box-shadow: var(--card-shadow);
      transition: box-shadow 0.3s;
    }
    .dash-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .fade-in {
      animation: fadeIn 0.7s ease-in-out forwards;
      opacity: 0;
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .hidden {
      display: none !important;
    }
    .chart-container {
      width: 100%;
      height: 300px;
      position: relative;
    }

    /* KPI Bubbles (the four big stats at top of Dashboard) */
    .kpi-card {
      display: flex;
      flex-direction: column;
      align-items: start;
      justify-content: center;
      height: 100%;
      border-radius: 6px;
      padding: 1rem;
      text-align: left;
    }
    .kpi-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #555;
    }
    .kpi-value {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    .kpi-change {
      font-size: 0.85rem;
    }
    .kpi-change.up {
      color: var(--up-color);
    }
    .kpi-change.down {
      color: var(--down-color);
    }

    /* “Recent Activities” styling */
    .activity-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 0.75rem;
    }
    .activity-icon {
      font-size: 1.25rem;
    }
    .activity-info {
      font-size: 0.95rem;
    }
    .activity-time {
      font-size: 0.85rem;
      color: #999;
    }

    /* For the small “Saved” popup and Notification toast */
    #savedPopup {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #28a745;
      color: #fff;
      padding: 0.75rem 1rem;
      border-radius: 4px;
      display: none;
      z-index: 3000;
    }
    #savedPopup.show {
      display: block;
    }
    .notification-toast {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 250px;
      z-index: 4000;
      display: none;
    }
    .notification-toast.show {
      display: block;
      animation: slideDown 0.5s ease-out;
    }
    @keyframes slideDown {
      from {
        top: -50px;
        opacity: 0;
      }
      to {
        top: 20px;
        opacity: 1;
      }
    }
    /****************************************************
     * The rest (tables, forms, spinners, etc.) 
     * left mostly unchanged from your original
     ****************************************************/
    table th {
      background-color: #f8f9fa;
    }
    table thead tr {
      border-bottom: 2px solid #ccc;
    }
    .mini-widget {
      cursor: pointer;
      transition: transform 0.2s;
    }
    .mini-widget:hover {
      transform: scale(1.02);
    }
    .chat-window {
      border: 1px solid #ccc;
      border-radius: 5px;
      height: 150px;
      overflow-y: auto;
      margin-bottom: 1rem;
      padding: 0.5rem;
    }
    .chat-window p {
      margin: 0.25rem 0;
    }
    .text-highlight-1 {
      color: #1abc9c;
    }
    .text-highlight-2 {
      color: #e67e22;
    }
    .text-highlight-3 {
      color: #3498db;
    }
    .text-highlight-4 {
      color: #e74c3c;
    }

    /* Inline spinners, popovers, etc. remain as is */
    .qualification-popover {
      position: absolute;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 0.5rem;
      width: 200px;
      top: 30px;
      left: 0;
      z-index: 999;
      display: none;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      font-size: 0.9rem;
    }
    .popover-container {
      position: relative;
    }

    .video-item,
    .post-item {
      width: 100%;
      margin-bottom: 1rem;
    }

    /* Video Styling: Fixed 16:9 ratio with object-fit */
    .video-item video {
      width: 100%;
      height: auto;
      aspect-ratio: 16 / 9;
      object-fit: contain;
      display: block;
    }

    /* Adjust post-item for fixed smaller size and left alignment */
    .post-item {
      max-width: 300px;
      width: 100%;
      margin-bottom: 1rem;
    }

    .post-item img {
      width: 100%;
      height: auto;
      object-fit: contain;
      display: block;
    }

    /* Caption Styling */
    .caption {
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <!-- (A) Bottom-right popup "Saved to Archive" -->
  <div id="savedPopup" class="popup-saved">Saved campaign content in archive</div>

  <!-- (B) Notification Toast (HR) -->
  <div class="notification-toast" id="hrNotification">
    <div class="toast show">
      <div class="toast-header bg-warning text-dark">
        <strong class="me-auto">HR Dept</strong>
        <small>Just now</small>
      </div>
      <div class="toast-body">
        <i class="bi bi-people-fill"></i> New applicant received!
      </div>
    </div>
  </div>

  <!-- ========== SIDEBAR ========== -->
  <div class="sidebar d-flex flex-column">
    <div class="brand">UPSTART</div>
    <hr />
    <ul class="nav nav-pills flex-column mb-auto" id="sidebarMenu">
      <!-- Reordered as requested:
           1) Dashboard
           2) Marketing
           3) Finance
           4) Accounting
           5) Human Resources
           6) Customer Service 
      -->
      <li class="nav-item">
        <a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')">
          <i class="bi bi-speedometer2"></i> Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a href="#marketing" class="nav-link" onclick="showSection('marketing')">
          <i class="bi bi-bullseye"></i> Marketing
        </a>
      </li>
      <li class="nav-item">
        <a href="#finance" class="nav-link" onclick="showSection('finance')">
          <i class="bi bi-cash-stack"></i> Finance
        </a>
      </li>
      <li class="nav-item">
        <a href="#accounting" class="nav-link" onclick="showSection('accounting')">
          <i class="bi bi-receipt-cutoff"></i> Accounting
        </a>
      </li>
      <li class="nav-item">
        <a href="#humanResources" class="nav-link" onclick="showSection('humanResources')">
          <i class="bi bi-people-fill"></i> Human Resources
          <span id="hrDeptIndicator"></span>
        </a>
      </li>
      <li class="nav-item">
        <a href="#customerService" class="nav-link" onclick="showSection('customerService')">
          <i class="bi bi-headset"></i> Customer Service
        </a>
      </li>
    </ul>
    <hr />
    <!-- Profile dropdown remains at bottom -->
    <div class="dropdown px-3">
      <a
        href="#"
        class="d-flex align-items-center text-white dropdown-toggle"
        id="dropdownUser1"
        data-bs-toggle="dropdown"
      >
        <strong>Admin</strong>
      </a>
      <ul
        class="dropdown-menu dropdown-menu-dark text-small shadow"
        aria-labelledby="dropdownUser1"
      >
        <li><a class="dropdown-item" href="#">Profile</a></li>
        <li><a class="dropdown-item" href="#">Settings</a></li>
        <li><hr class="dropdown-divider" /></li>
        <li><a class="dropdown-item" href="#">Sign out</a></li>
      </ul>
    </div>
  </div>

  <!-- ========== MAIN CONTENT AREA ========== -->
  <div class="main-content">
    <!-- Top Bar (Removed "Save for Figma") -->
    <div class="top-bar">
      <!-- We keep the gear icon and user avatar; remove if not needed -->
      <button class="btn btn-outline-secondary btn-sm">
        <i class="bi bi-gear"></i>
      </button>
      <div class="user-avatar">
        <i class="bi bi-person-circle fs-4"></i>
      </div>
    </div>

    <!-- ============== DASHBOARD SECTION ============== -->
    <div id="dashboard" class="section fade-in">
      <h4 class="text-secondary mb-1">Dashboard</h4>
      <p class="text-muted" style="margin-top: -6px;">Welcome back, Bassam</p>

      <!-- KPI Row (4 columns) 
           Reverted to original text: 
           (Monthly Revenue, Active Campaigns, Open Positions, Support Tickets)
      -->
      <div class="row g-3 mb-3">
        <div class="col-md-3">
          <div class="dash-card kpi-card">
            <div class="kpi-title">Monthly Revenue</div>
            <div class="kpi-value" id="dashboardRevenue">--</div>
            <div class="kpi-change up"><i class="bi bi-arrow-up-right"></i> +12%</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="dash-card kpi-card">
            <div class="kpi-title">Active Campaigns</div>
            <div class="kpi-value" id="dashboardCampaigns">--</div>
            <div class="kpi-change up"><i class="bi bi-arrow-up-right"></i> +8%</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="dash-card kpi-card">
            <div class="kpi-title">Open Positions</div>
            <div class="kpi-value" id="dashboardPositions">--</div>
            <div class="kpi-change down"><i class="bi bi-arrow-down-right"></i> -3%</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="dash-card kpi-card">
            <div class="kpi-title">Support Tickets</div>
            <div class="kpi-value" id="dashboardTickets">--</div>
            <div class="kpi-change up"><i class="bi bi-arrow-up-right"></i> +15%</div>
          </div>
        </div>
      </div>

      <!-- 2-Column Row: Department Performance + Revenue Analysis -->
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Department Performance</h5>
            <div class="chart-container">
              <!-- Still uses id="revenueChart" so existing JS works -->
              <canvas id="revenueChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Expenditure Trend</h5>
            <div class="chart-container">
              <!-- id="expenditureChart" so existing JS works -->
              <canvas id="expenditureChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Activities (unchanged) -->
      <div class="dash-card">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="mb-0">Recent Activities</h5>
          <a href="#" class="text-decoration-underline" style="font-size: 0.9rem;">View All</a>
        </div>
        <div class="activity-item">
          <span class="activity-icon text-success"><i class="bi bi-file-earmark-check"></i></span>
          <div>
            <div class="activity-info">New invoice processed <small>(Finance)</small></div>
            <div class="activity-time">2 hours ago</div>
          </div>
        </div>
        <div class="activity-item">
          <span class="activity-icon text-primary"><i class="bi bi-person-plus"></i></span>
          <div>
            <div class="activity-info">New employee onboarded <small>(HR)</small></div>
            <div class="activity-time">5 hours ago</div>
          </div>
        </div>
        <div class="activity-item">
          <span class="activity-icon text-warning"><i class="bi bi-bullhorn"></i></span>
          <div>
            <div class="activity-info">Marketing campaign launched <small>(Marketing)</small></div>
            <div class="activity-time">1 day ago</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============== MARKETING SECTION ============== -->
    <div id="marketing" class="section fade-in hidden">
      <h1 class="section-header">Marketing</h1>
      <!-- Your marketing logic stays the same -->
      <div class="dash-card mb-3">
        <label for="marketingPrompt" class="form-label fw-bold">
          Enter a prompt for the AI to create your marketing campaign:
        </label>
        <input
          type="text"
          class="form-control mb-2"
          id="marketingPrompt"
          placeholder="E.g. Summer sale campaign targeting Instagram only..."
        />
        <button class="btn btn-primary" onclick="generateMarketingContent()">
          Generate Campaign
        </button>
        <div id="miniSpinner" class="text-center mt-3 d-none">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-2">Generating content...</p>
        </div>
      </div>

      <div id="aiGeneratedContent" style="display: none;">
        <div class="row">
          <!-- Left Column: AI-Generated Videos -->
          <div class="col-md-6">
            <h5>AI-Generated Videos</h5>
            <div class="row g-2">
              <!-- Video 1 -->
              <div class="col-6">
                <div class="video-item">
                  <video controls>
                    <source src="cat.mp4" type="video/mp4" />
                    Your browser does not support the video tag.
                  </video>
                  <p class="caption">Short Reel advertisement </p>
                  <input type="text" class="form-control" placeholder="What would you like to change?" />
                </div>
              </div>
              <!-- Video 2 -->
              <div class="col-6">
                <div class="video-item">
                  <video controls>
                    <source src="cat.mp4" type="video/mp4" />
                    Your browser does not support the video tag.
                  </video>
                  <p class="caption">Long 5 minute rendition</p>
                  <input type="text" class="form-control" placeholder="What would you like to change?" />
                </div>
              </div>
            </div>
          </div>
          
          <!-- Right Column: AI-Generated Posts -->
          <div class="col-md-6">
            <h5>AI-Generated Posts</h5>
            <div class="row g-2">
              <!-- Post 1 -->
              <div class="col-6">
                <div class="post-item">
                  <img src="post.jpg" alt="Post 1" />
                  <p class="caption">Check out our summer sale! #summer #sale</p>
                  <div class="mt-2">
                    <button class="btn btn-primary btn-sm">
                      <i class="bi bi-upload"></i> Post
                    </button>
                  </div>
                  <div class="mt-2 social-icons">
                    <button class="btn btn-light"><i class="bi bi-facebook"></i></button>
                    <button class="btn btn-light"><i class="bi bi-instagram"></i></button>
                    <button class="btn btn-light"><i class="bi bi-twitter"></i></button>
                    <button class="btn btn-light"><i class="bi bi-linkedin"></i></button>
                  </div>
                </div>
              </div>
              <!-- Post 2 -->
              <div class="col-6">
                <div class="post-item">
                  <img src="post2.jpg" alt="Post 2" />
                  <p class="caption">Don't miss out! #deal #promo</p>
                  <div class="mt-2">
                    <button class="btn btn-primary btn-sm">
                      <i class="bi bi-upload"></i> Post
                    </button>
                  </div>
                  <div class="mt-2 social-icons">
                    <button class="btn btn-light"><i class="bi bi-facebook"></i></button>
                    <button class="btn btn-light"><i class="bi bi-instagram"></i></button>
                    <button class="btn btn-light"><i class="bi bi-twitter"></i></button>
                    <button class="btn btn-light"><i class="bi bi-linkedin"></i></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Bottom Buttons -->
        <div class="d-flex gap-2 mt-3">
          <button class="btn btn-secondary" onclick="resetGeneratedContent()">Start Over</button>
          <button class="btn btn-success" onclick="saveGeneratedContent()">Save for Later</button>
          <button class="btn btn-primary" onclick="launchCampaign()">Launch Campaign</button>
        </div>
        <div class="d-flex justify-content-center gap-3 mt-3">
          <button class="btn btn-light"><i class="bi bi-facebook"></i></button>
          <button class="btn btn-light"><i class="bi bi-instagram"></i></button>
          <button class="btn btn-light"><i class="bi bi-twitter"></i></button>
          <button class="btn btn-light"><i class="bi bi-linkedin"></i></button>
        </div>
      </div>
      
      
      
      

      <!-- Engagement & Conversion Charts -->
      <div class="row g-3 mt-3">
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Engagement Over Time</h5>
            <div class="chart-container">
              <canvas id="engagementChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Conversion Rate Trend</h5>
            <div class="chart-container">
              <canvas id="conversionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============== FINANCE SECTION ============== -->
    <div id="finance" class="section fade-in hidden">
      <h1 class="section-header">Finance</h1>
      <div class="dash-card mb-3">
        <h5>Generate Quarterly Financial Statements</h5>
        <input
          type="text"
          class="form-control mb-2"
          placeholder="Enter quarter info (e.g. Q1 2025)"
          id="quarterlyStatementInput"
        />
        <button class="btn btn-primary" onclick="generateQuarterlyStatements()">
          Generate Statements
        </button>
      </div>
      <div class="dash-card">
        <h5>Financial Inputs</h5>
        <form id="financeForm" class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Monthly Revenue</label>
            <input
              type="number"
              class="form-control"
              id="monthlyRevenue"
              placeholder="10000"
              required
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">Monthly Expenses</label>
            <input
              type="number"
              class="form-control"
              id="monthlyExpenses"
              placeholder="4000"
              required
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">Country (Tax)</label>
            <input
              type="text"
              class="form-control"
              id="taxCountry"
              placeholder="e.g. Canada"
              required
            />
          </div>
          <div class="col-12">
            <button class="btn btn-primary" type="submit">
              Calculate Net &amp; Tax
            </button>
          </div>
        </form>
        <div class="mt-3" id="financeResults" style="display: none;">
          <p>
            <strong>Net Income:</strong>
            <span id="netIncome"></span>
          </p>
          <p>
            <strong>Tax Owed:</strong>
            <span id="taxOwed"></span>
          </p>
        </div>
      </div>
      <div class="row g-3">
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Monthly Budget &amp; Forecast</h5>
            <p>See how your budget may look for the upcoming months.</p>
            <div class="chart-container">
              <canvas id="budgetChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Expenses Distribution</h5>
            <p>A quick breakdown of expense categories.</p>
            <div class="chart-container">
              <canvas id="expensesDistributionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============== ACCOUNTING SECTION ============== -->
    <div id="accounting" class="section fade-in hidden">
      <h1 class="section-header">Accounting</h1>
      <div class="dash-card">
        <h5>Financial Statements</h5>
        <p>
          Generate or view your statements for a specific time period.
          <button class="btn btn-sm btn-primary">Generate Statement</button>
        </p>
      </div>
      <div class="dash-card">
        <h5>Cash Flow</h5>
        <p>
          Quick snapshot of your incoming and outgoing funds.
          <button class="btn btn-sm btn-secondary">View Cash Flow</button>
        </p>
      </div>
      <div class="dash-card">
        <h5>Revenue Balance Sheet</h5>
        <p>
          Consolidated view of assets, liabilities, and equity.
          <button class="btn btn-sm btn-success">Show Balance Sheet</button>
        </p>
      </div>
      <div class="dash-card">
        <h5>Taxes</h5>
        <p>
          Configure or calculate your taxes based on the chosen region.
          <button class="btn btn-sm btn-warning">Calculate Taxes</button>
        </p>
      </div>
    </div>

    <!-- ============== HUMAN RESOURCES SECTION ============== -->
    <div id="humanResources" class="section fade-in hidden">
      <h1 class="section-header">Human Resources</h1>
      <!-- Two columns: Job Listings & View Applicants -->
      <div class="row g-3 mb-3">
        <!-- Job Listings -->
        <div class="col-md-6">
          <div class="dash-card">
            <h5>Job Listings</h5>
            <!-- Generate Job Posting Prompt with inline spinner -->
            <div class="mb-3">
              <label class="form-label">Generate job posting?</label>
              <div class="d-flex">
                <textarea
                  class="form-control me-2"
                  id="jobPrompt"
                  rows="1"
                  placeholder="We need a software developer with 2 years experience in React..."
                ></textarea>
                <button class="btn btn-primary" onclick="generateJobFromPrompt()">
                  Generate
                </button>
              </div>
              <!-- Inline spinner for job posting generation -->
              <div id="jobSpinner" class="text-center mt-2 d-none">
                <div class="spinner-border spinner-border-sm" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <span class="ms-2">Generating job posting...</span>
              </div>
            </div>
            <table class="table table-hover" id="jobsTable">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Roles &amp; Responsibilities</th>
                  <th>KPIs</th>
                </tr>
              </thead>
              <tbody>
                <!-- Populated dynamically -->
              </tbody>
            </table>
            <button class="btn btn-secondary mt-2" onclick="publishJobs()">
              Publish All Jobs
            </button>
          </div>
        </div>
        <!-- View Applicants -->
        <div class="col-md-6">
          <div class="dash-card">
            <h5>View Applicants</h5>
            <table class="table table-bordered" id="applicantTable">
              <thead>
                <tr>
                  <th>Applicant</th>
                  <th>Position</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <!-- Rows added dynamically when "O" is pressed -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Three columns side-by-side: Perf Tracking, Time Entries, Perf Trend -->
      <div class="row g-3">
      <div class="col-md-4">
        <div class="dash-card">
          <h5>Employee Performance Trend</h5>
          <p>Visualize how employee performance changes over time.</p>
          <div class="chart-container">
            <canvas id="employeePerformanceChart"></canvas>
          </div>
        </div>
      </div>

        <div class="col-md-4">
          <div class="dash-card">
            <h5>Employee Performance Tracking</h5>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Employee</th>
                  <th>Tasks Completed</th>
                  <th>KPI Score</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>John Manager</td>
                  <td>15</td>
                  <td>80%</td>
                  <td>
                    <button
                      class="btn btn-outline-primary btn-sm"
                      onclick="assignBonus(this)"
                    >
                      Give Bonus
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>Jane Developer</td>
                  <td>20</td>
                  <td>90%</td>
                  <td>
                    <button
                      class="btn btn-outline-primary btn-sm"
                      onclick="assignBonus(this)"
                    >
                      Give Bonus
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="col-md-4">
          <div class="dash-card">
            <h5>Employee Time Entries</h5>
            <table class="table table-hover" id="timeEntryTable">
              <thead>
                <tr>
                  <th>Employee</th>
                  <th>Hours Clocked</th>
                  <th>Hourly Rate</th>
                  <th>Total Paycheck</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>John Manager</td>
                  <td>40</td>
                  <td>$20</td>
                  <td>$800</td>
                </tr>
                <tr>
                  <td>Jane Developer</td>
                  <td>42</td>
                  <td>$25</td>
                  <td>$1050</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ============== CUSTOMER SERVICE SECTION ============== -->
    <div id="customerService" class="section fade-in hidden">
      <h1 class="section-header">Customer Service</h1>
      <div class="dash-card">
        <h5>Ongoing Chats</h5>
        <div class="row">
          <div class="col-md-4">
            <h6>Chat #1 (AI - Customer A)</h6>
            <div class="chat-window">
              <p><strong>Customer A:</strong> Hi, I need help!</p>
              <p><strong>AI:</strong> Sure, what do you need assistance with?</p>
            </div>
          </div>
          <div class="col-md-4">
            <h6>Chat #2 (AI - Customer B)</h6>
            <div class="chat-window">
              <p><strong>Customer B:</strong> Is my order shipped?</p>
              <p><strong>AI:</strong> Checking... Your order is on the way!</p>
            </div>
          </div>
          <div class="col-md-4">
            <h6>Chat #3 (AI - Customer C)</h6>
            <div class="chat-window">
              <p><strong>Customer C:</strong> How do I reset password?</p>
              <p><strong>AI:</strong> Let me guide you through that...</p>
            </div>
          </div>
        </div>
      </div>
      <div class="dash-card">
        <h5>Phone Operated AI</h5>
        <p>Simulate an AI-driven call system.</p>
        <button class="btn btn-success mb-2" type="button" onclick="startCall()">
          <i class="bi bi-telephone"></i> Start Call
        </button>
        <div id="callStatus" class="text-muted"></div>
      </div>
      <div class="dash-card">
        <h5>FAQ Management</h5>
        <form class="d-flex mb-3" onsubmit="addFaq(event)">
          <input
            type="text"
            class="form-control"
            id="faqQuestion"
            placeholder="Enter a new FAQ question"
            required
          />
          <button class="btn btn-outline-primary ms-2" type="submit">
            Add FAQ
          </button>
        </form>
        <ul class="list-group" id="faqList">
          <li class="list-group-item">How do I reset my password?</li>
          <li class="list-group-item">Where can I track my orders?</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>

  <script>
    /******************************************************
     * Show/Hide Sections
     ******************************************************/
    const sections = document.querySelectorAll(".section");
    const navLinks = document.querySelectorAll("#sidebarMenu a.nav-link");
    function showSection(sectionId) {
      sections.forEach((sec) => {
        sec.classList.add("hidden");
        sec.classList.remove("fade-in");
      });
      navLinks.forEach((link) => link.classList.remove("active"));
      const target = document.getElementById(sectionId);
      target.classList.remove("hidden");
      void target.offsetWidth; // reflow trick
      target.classList.add("fade-in");

      const activeLink = document.querySelector(
        `#sidebarMenu a[href="#${sectionId}"]`
      );
      if (activeLink) activeLink.classList.add("active");

      if (sectionId === "humanResources") {
        document.getElementById("hrDeptIndicator").style.display = "none";
      }
    }

    /******************************************************
     * Dashboard Data & Charts
     ******************************************************/
    const dashboardRevenue = document.getElementById("dashboardRevenue");
    const dashboardCampaigns = document.getElementById("dashboardCampaigns");
    const dashboardPositions = document.getElementById("dashboardPositions");
    const dashboardTickets = document.getElementById("dashboardTickets");

    let revenueChart, expenditureChart;

    function initDashboardData() {
      // If you want static values, replace these randoms:
      dashboardRevenue.textContent = "$" + randomInt(10000, 20000).toLocaleString();
      dashboardCampaigns.textContent = randomInt(2, 10);
      dashboardPositions.textContent = randomInt(1, 5);
      dashboardTickets.textContent = randomInt(0, 10);
    }

    // Helper for random
    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function createLineChart(ctx, label) {
      return new Chart(ctx, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
          datasets: [
            {
              label: label,
              data: Array.from({ length: 6 }, () => randomInt(5000, 15000)),
              tension: 0.3,
              borderWidth: 2,
            },
          ],
        },
        options: {
          responsive: true,
          animation: { duration: 1000 },
        },
      });
    }

    function initDashboardCharts() {
      const revenueCtx = document.getElementById("revenueChart").getContext("2d");
      revenueChart = createLineChart(revenueCtx, "Department Performance");

      const expCtx = document
        .getElementById("expenditureChart")
        .getContext("2d");
      expenditureChart = createLineChart(expCtx, "Expenditure Trend");
    }

    /******************************************************
     * Marketing Section
     ******************************************************/
    function generateMarketingContent() {
      const userPrompt = document.getElementById("marketingPrompt").value.trim();
      if (!userPrompt) {
        alert("Please enter a prompt for your marketing campaign!");
        return;
      }
      const miniSpinner = document.getElementById("miniSpinner");
      miniSpinner.classList.remove("d-none");
      setTimeout(() => {
        miniSpinner.classList.add("d-none");
        document.getElementById("aiGeneratedContent").style.display = "block";
      }, 2000);
    }
    function resetGeneratedContent() {
      document.getElementById("marketingPrompt").value = "";
      document.getElementById("aiGeneratedContent").style.display = "none";
    }
    function saveGeneratedContent() {
      document.getElementById("aiGeneratedContent").style.display = "none";
      const savedPopup = document.getElementById("savedPopup");
      savedPopup.textContent = "Saved campaign content in archive";
      savedPopup.classList.add("show");
      setTimeout(() => {
        savedPopup.classList.remove("show");
      }, 3000);
    }
    function launchCampaign() {
      alert("Campaign Launched!");
    }

    let engagementChart, conversionChart;
    function initEngagementChart() {
      const ctx = document.getElementById("engagementChart").getContext("2d");
      engagementChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
          datasets: [
            {
              label: "Engagement",
              data: Array.from({ length: 6 }, () => randomInt(50, 150)),
              borderWidth: 2,
              tension: 0.3,
            },
          ],
        },
        options: { responsive: true, animation: { duration: 1000 } },
      });
    }
    function initConversionChart() {
      const ctx = document.getElementById("conversionChart").getContext("2d");
      conversionChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
          datasets: [
            {
              label: "Conversion Rate",
              data: Array.from({ length: 6 }, () => randomInt(5, 20)),
              borderWidth: 2,
              tension: 0.3,
            },
          ],
        },
        options: { responsive: true, animation: { duration: 1000 } },
      });
    }

    /******************************************************
     * Finance Section
     ******************************************************/
    const financeForm = document.getElementById("financeForm");
    const financeResults = document.getElementById("financeResults");
    const netIncome = document.getElementById("netIncome");
    const taxOwed = document.getElementById("taxOwed");

    financeForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const monthlyRev = parseFloat(
        document.getElementById("monthlyRevenue").value
      );
      const monthlyExp = parseFloat(
        document.getElementById("monthlyExpenses").value
      );
      const country = document.getElementById("taxCountry").value.trim();

      const net = monthlyRev - monthlyExp;
      const tax = net * 0.15;

      netIncome.textContent =
        "$" +
        net.toLocaleString(undefined, {
          minimumFractionDigits: 2,
          maximumFractionDigits: 2,
        });
      taxOwed.textContent = `$${tax.toLocaleString(undefined, {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      })} (approx, for ${country})`;

      financeResults.style.display = "block";
    });

    function generateQuarterlyStatements() {
      const quarter = document
        .getElementById("quarterlyStatementInput")
        .value.trim();
      if (!quarter) {
        alert("Please enter a quarter (e.g. Q1 2025).");
        return;
      }
      alert(`Generating financial statements for ${quarter}...`);
    }

    let budgetChart, expensesDistChart;
    function initBudgetChart() {
      const ctx = document.getElementById("budgetChart").getContext("2d");
      budgetChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
          datasets: [
            {
              label: "Forecasted Budget",
              data: Array.from({ length: 6 }, () => randomInt(5000, 12000)),
            },
          ],
        },
        options: { responsive: true, animation: { duration: 1000 } },
      });
    }
    function initExpensesDistributionChart() {
      const ctx =
        document.getElementById("expensesDistributionChart").getContext("2d");
      expensesDistChart = new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: ["Salaries", "Rent", "Utilities", "Marketing", "Misc"],
          datasets: [
            {
              data: [
                randomInt(1000, 5000),
                randomInt(1000, 5000),
                randomInt(500, 2000),
                randomInt(1000, 4000),
                randomInt(300, 1500),
              ],
            },
          ],
        },
        options: { responsive: true, animation: { duration: 1000 } },
      });
    }

    /******************************************************
     * Human Resources Section
     ******************************************************/
    const jobsTable = document.getElementById("jobsTable").querySelector("tbody");
    const applicantTable = document
      .getElementById("applicantTable")
      .querySelector("tbody");

    function publishJobs() {
      alert("All new jobs have been published successfully!");
    }
    function assignBonus(btn) {
      alert("Bonus assigned successfully!");
    }
    function generateJobFromPrompt() {
      const prompt = document.getElementById("jobPrompt").value.trim();
      if (!prompt) {
        alert("Please enter a job description prompt.");
        return;
      }
      const jobSpinner = document.getElementById("jobSpinner");
      jobSpinner.classList.remove("d-none");
      setTimeout(() => {
        jobSpinner.classList.add("d-none");
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>Software Engineer</td>
          <td>
            Enrolled in Bachelor’s degree in Computer Science or equivalent<br>
            Prior internship experience using Python to develop backend services<br>
            Experience supporting software development &amp; writing tests<br>
            Excellent communication skills
          </td>
          <td>Increase efficiency by 20%<br>Reduce API call errors</td>
        `;
        jobsTable.appendChild(row);
      }, 1500);
    }

    // Add a new applicant row when "O" is pressed
    function addFakeApplicant() {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><span class="new-indicator"></span> Joe Goldberg</td>
        <td>Programmer</td>
        <td><span class="badge bg-info">Reviewing</span></td>
        <td class="popover-container">
          <button class="btn btn-outline-primary btn-sm me-1">View CV</button>
          <button class="btn btn-warning btn-sm me-1" onclick="assessQualification(this)">Assess for Interview</button>
          <select class="form-select form-select-sm d-inline-block w-auto" onchange="handleApplicantAction(this)">
            <option value="">Select Action</option>
            <option value="reject">Reject</option>
            <option value="contact">Contact</option>
          </select>
          <div class="qualification-popover"></div>
        </td>
      `;
      applicantTable.appendChild(tr);
      document.getElementById("hrDeptIndicator").style.display = "inline-block";
    }

    function assessQualification(btn) {
      btn.disabled = true;
      btn.textContent = "Assessing...";
      setTimeout(() => {
        const percentage = randomInt(50, 95);
        btn.textContent = `Score: ${percentage}%`;
        const container = btn.closest(".popover-container");

        // Remove any existing popover or arrow
        let existingPopover = container.querySelector(".qualification-popover");
        let existingArrow = container.querySelector("i");
        if (existingPopover) existingPopover.remove();
        if (existingArrow) existingArrow.remove();

        // Arrow
        const arrow = document.createElement("i");
        arrow.className = "bi bi-caret-right-fill ms-1";
        arrow.style.cursor = "pointer";
        arrow.onclick = function () {
          const popover = container.querySelector(".qualification-popover");
          if (popover.style.display === "block") {
            popover.style.display = "none";
            arrow.className = "bi bi-caret-right-fill ms-1";
          } else {
            popover.style.display = "block";
            arrow.className = "bi bi-caret-down-fill ms-1";
          }
        };
        btn.after(arrow);

        // Popover
        const detailDiv = document.createElement("div");
        detailDiv.className = "qualification-popover";
        detailDiv.style.display = "none";
        detailDiv.innerHTML = `
          <strong>Qualification Score: ${percentage}%</strong><br>
          Applicant has project qualifications but lacks experience in the field.
        `;
        container.appendChild(detailDiv);
      }, 1500);
    }

    function handleApplicantAction(selectEl) {
      const action = selectEl.value;
      const container = selectEl.closest(".popover-container");
      const popover = container.querySelector(".qualification-popover");
      if (action === "reject" || action === "contact") {
        popover.style.display = "none";
        alert("Action: " + action.charAt(0).toUpperCase() + action.slice(1));
      }
    }

    // “O” or “o” key triggers new applicant notification + row
    const hrNotification = document.getElementById("hrNotification");
    document.addEventListener("keydown", (e) => {
      if (e.key === ".") {
        hrNotification.classList.add("show");
        setTimeout(() => {
          hrNotification.classList.remove("show");
        }, 3000);
        addFakeApplicant();
      }
    });

    let employeePerformanceChart;
    function initEmployeePerformanceChart() {
      const ctx = document
        .getElementById("employeePerformanceChart")
        .getContext("2d");
      employeePerformanceChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: ["Q1", "Q2", "Q3", "Q4"],
          datasets: [
            {
              label: "John Manager",
              data: [
                randomInt(50, 100),
                randomInt(50, 100),
                randomInt(50, 100),
                randomInt(50, 100),
              ],
              borderWidth: 2,
              tension: 0.3,
            },
            {
              label: "Jane Developer",
              data: [
                randomInt(50, 100),
                randomInt(50, 100),
                randomInt(50, 100),
                randomInt(50, 100),
              ],
              borderWidth: 2,
              tension: 0.3,
            },
          ],
        },
        options: { responsive: true, animation: { duration: 1000 } },
      });
    }

    /******************************************************
     * Customer Service
     ******************************************************/
    let callInProgress = false;
    const callStatus = document.getElementById("callStatus");
    function startCall() {
      if (!callInProgress) {
        callStatus.textContent = "Calling... AI is answering.";
        callInProgress = true;
        setTimeout(() => {
          callStatus.textContent = "In Call with AI assistant.";
        }, 2000);
      } else {
        callStatus.textContent = "Call ended.";
        callInProgress = false;
      }
    }
    const faqList = document.getElementById("faqList");
    function addFaq(event) {
      event.preventDefault();
      const question = document.getElementById("faqQuestion").value.trim();
      if (!question) return;
      const li = document.createElement("li");
      li.classList.add("list-group-item");
      li.textContent = question;
      faqList.appendChild(li);
      document.getElementById("faqQuestion").value = "";
    }

    /******************************************************
     * On Window Load
     ******************************************************/
    window.addEventListener("DOMContentLoaded", () => {
      initDashboardData();
      initDashboardCharts();

      initEngagementChart();
      initConversionChart();
      initBudgetChart();
      initExpensesDistributionChart();
      initEmployeePerformanceChart();
    });
  </script>
</body>
</html>
